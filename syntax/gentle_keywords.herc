// gentle_keywords.herc - HerLang æ¸©æŸ”è¯­æ³•ç¤ºä¾‹
// å±•ç¤ºç°ä»£åŒ–å¥³æ€§å‹å¥½ç¼–ç¨‹è¯­è¨€çš„æ¸©æŸ”è¡¨è¾¾æ–¹å¼

// === åŸºç¡€å‡½æ•°å®šä¹‰ ===
gentle_function greet_with_love(name):
    say "ğŸ’– ä½ å¥½ï¼Œäº²çˆ±çš„ " + name + "ï¼"
    whisper "æ„¿ä½ ä»Šå¤©å……æ»¡é˜³å…‰"
end

// === æ¡ä»¶åˆ¤æ–­ - æ¸©æŸ”çš„æ–¹å¼ ===
gentle_function check_mood(feeling):
    gently_if feeling == "happy":
        say "ğŸŒ¸ å¤ªå¥½äº†ï¼ç»§ç»­ä¿æŒè¿™ä»½å¿«ä¹"
    perhaps feeling == "sad":
        say "ğŸ¤— ç»™ä½ ä¸€ä¸ªæ¸©æš–çš„æ‹¥æŠ±"
        suggest "è¦ä¸è¦å¬å¬éŸ³ä¹æˆ–è€…æ•£æ•£æ­¥ï¼Ÿ"
    otherwise:
        say "ğŸ’ æ— è®ºæ€æ ·ï¼Œä½ éƒ½å¾ˆæ£’"
    end
end

// === å¾ªç¯ - ä¼˜é›…çš„è¿­ä»£ ===
gentle_function count_blessings():
    blessings = ["å¥åº·", "å‹è°Š", "å­¦ä¹ ", "æˆé•¿", "çˆ±"]

    gently_for each blessing in blessings:
        say "ğŸ™ æ„Ÿæ©æ‹¥æœ‰ï¼š" + blessing
        pause_and_reflect 100ms
    end

    say "âœ¨ ç”Ÿæ´»ä¸­æœ‰è¿™ä¹ˆå¤šç¾å¥½"
end

// === å¹¶å‘ç¼–ç¨‹ - åä½œå¼å¤šä»»åŠ¡ ===
gentle_function collaborative_work():
    // åˆ›å»ºæ¸©æŸ”çš„åç¨‹
    spawn_gently task1():
        repeat 3 times:
            say "ğŸŒº ä»»åŠ¡1æ­£åœ¨ä¼˜é›…åœ°å·¥ä½œ..."
            yield_kindly 500ms
        end
    end

    spawn_gently task2():
        repeat 3 times:
            say "ğŸ¦‹ ä»»åŠ¡2æ­£åœ¨é™é™åœ°è¿è¡Œ..."
            yield_kindly 300ms
        end
    end

    // ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ
    await_all_with_patience
    say "ğŸ‰ æ‰€æœ‰ä»»åŠ¡éƒ½å®Œæˆäº†ï¼Œå›¢é˜Ÿåˆä½œçœŸæ£’ï¼"
end

// === é”™è¯¯å¤„ç† - æ¸©æŸ”çš„å¼‚å¸¸å¤„ç† ===
gentle_function handle_with_care():
    try_gently:
        risky_operation()
    catch_and_comfort error:
        say "ğŸ˜Š é‡åˆ°äº†å°é—®é¢˜ï¼Œä¸è¦æ‹…å¿ƒ"
        say "é”™è¯¯ä¿¡æ¯ï¼š" + error.message
        suggest "è®©æˆ‘ä»¬ä¸€èµ·è§£å†³è¿™ä¸ªé—®é¢˜"

        // æä¾›æ¢å¤å»ºè®®
        offer_solution:
            say "ğŸ’¡ å¯ä»¥å°è¯•ä»¥ä¸‹æ–¹æ³•ï¼š"
            say "1. æ£€æŸ¥è¾“å…¥æ•°æ®"
            say "2. ç¡®è®¤ç½‘ç»œè¿æ¥"
            say "3. é‡æ–°å°è¯•æ“ä½œ"
        end
    finally_with_grace:
        say "ğŸŒŸ æ— è®ºç»“æœå¦‚ä½•ï¼Œä½ éƒ½åšå¾—å¾ˆå¥½"
    end
end

// === æ•°æ®ç»“æ„ - ä¼˜é›…çš„é›†åˆæ“ä½œ ===
gentle_function work_with_collections():
    // åˆ›å»ºä¸€ä¸ªæ¸©æŸ”çš„åˆ—è¡¨
    gentle_list fruits = ["ğŸ è‹¹æœ", "ğŸŒ é¦™è•‰", "ğŸ“ è‰è“", "ğŸ¥ çŒ•çŒ´æ¡ƒ"]

    // æ¸©æŸ”åœ°éå†
    gently_for each fruit in fruits:
        say "å“å°ç¾å‘³çš„ " + fruit
    end

    // æ¸©æŸ”åœ°ç­›é€‰
    sweet_fruits = fruits.filter_gently(fruit -> fruit.contains("ç”œ"))

    // æ¸©æŸ”åœ°æ˜ å°„è½¬æ¢
    uppercase_fruits = fruits.transform_kindly(fruit -> fruit.to_upper())

    say "ğŸ½ï¸ äº«å—è¿™äº›ç¾å‘³çš„æ°´æœå§ï¼"
end

// === ç±»å‹å®šä¹‰ - æ¸©æŸ”çš„æ•°æ®å»ºæ¨¡ ===
gentle_type Person:
    name: String
    age: Number
    interests: List<String>

    gentle_method introduce_yourself():
        say "ğŸŒ¸ å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ " + self.name
        say "æˆ‘å–œæ¬¢ " + self.interests.join_with_love(", ")
    end

    gentle_method celebrate_birthday():
        self.age = self.age + 1
        say "ğŸ‚ ç”Ÿæ—¥å¿«ä¹ï¼ç°åœ¨ " + self.age + " å²äº†"
        say "ğŸ‰ æ„¿æ–°çš„ä¸€å²å……æ»¡æƒŠå–œå’Œæˆé•¿"
    end
end

// === å¼‚æ­¥ç¼–ç¨‹ - æ¸©æŸ”çš„å¼‚æ­¥æ“ä½œ ===
async gentle_function fetch_inspiration():
    say "ğŸ” æ­£åœ¨å¯»æ‰¾çµæ„Ÿ..."

    inspiration = await_patiently fetch_from_api("https://api.inspiration.com/daily")

    gently_if inspiration.success:
        say "ğŸ’¡ ä»Šæ—¥çµæ„Ÿï¼š" + inspiration.message
    else:
        say "ğŸŒˆ æ²¡å…³ç³»ï¼Œçµæ„Ÿå°±åœ¨æˆ‘ä»¬å¿ƒä¸­"
        offer_local_inspiration()
    end
end

// === æ¨¡å¼åŒ¹é… - ä¼˜é›…çš„åˆ†æ”¯å¤„ç† ===
gentle_function handle_response(response):
    match_gently response:
        case Success(data):
            say "ğŸ‰ æˆåŠŸè·å¾—æ•°æ®ï¼š" + data
            celebrate_success()

        case Warning(message):
            say "âš ï¸ æ¸©é¦¨æç¤ºï¼š" + message
            suggest_improvement()

        case Error(code, message):
            say "ğŸ’ é‡åˆ°é”™è¯¯ " + code + "ï¼š" + message
            offer_help_and_support()

        case _:
            say "ğŸ¤” è¿™æ˜¯ä¸€ä¸ªæ–°æƒ…å†µï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¢ç´¢"
    end
end

// === åŒ…ç®¡ç†å’Œæ¨¡å—å¯¼å…¥ ===
import_with_gratitude "std/collections" as gentle_collections
import_lovingly "ui/components" exposing (Button, TextInput, Layout)
import_carefully "network/http" with_safety_checks

// === å£°æ˜å¼UIç¤ºä¾‹ ===
gentle_function create_welcoming_ui():
    return gentle_layout:
        header:
            title "ğŸŒ¸ æ¬¢è¿æ¥åˆ° HerLang"
            subtitle "æ¸©æŸ”çš„ç¼–ç¨‹ä½“éªŒ"
        end

        main_content:
            card:
                say_gently "è¿™é‡Œæ˜¯ä¸€ä¸ªå®‰å…¨ã€åŒ…å®¹çš„ç¼–ç¨‹ç©ºé—´"

                button "å¼€å§‹å­¦ä¹ " on_click: start_learning
                button "å¯»æ±‚å¸®åŠ©" on_click: get_support
                button "åˆ†äº«æƒ³æ³•" on_click: share_thoughts
            end

            gentle_form:
                text_input "ä½ çš„åå­—" placeholder: "å‘Šè¯‰æˆ‘ä»¬ä½ çš„åå­—"
                text_area "ä»Šå¤©çš„å¿ƒæƒ…" placeholder: "åˆ†äº«ä½ ä»Šå¤©çš„æ„Ÿå—"
                submit_button "æ¸©æŸ”æäº¤" style: "gentle-primary"
            end
        end

        footer:
            say "ğŸ’– è®°ä½ï¼šæ¯ä¸ªäººéƒ½å€¼å¾—è¢«æ¸©æŸ”ä»¥å¾…"
        end
    end
end

// === æµ‹è¯•æ¡†æ¶ - æ¸©æŸ”çš„æµ‹è¯• ===
gentle_test "æ£€æŸ¥é—®å€™åŠŸèƒ½":
    given:
        name = "å°æ˜"
    when:
        result = greet_with_love(name)
    then:
        expect_kindly result contains "å°æ˜"
        expect_gently result contains "ğŸ’–"
    end

    say "âœ… æµ‹è¯•é€šè¿‡ï¼ŒåŠŸèƒ½è¿è¡Œè‰¯å¥½"
end

// === ä¸»ç¨‹åºå…¥å£ ===
start_with_intention:
    say "ğŸŒ… æ–°çš„ä¸€å¤©å¼€å§‹äº†"

    // å¹¶å‘æ‰§è¡Œå¤šä¸ªä»»åŠ¡
    collaborate:
        greet_with_love("ä¸–ç•Œ")
        check_mood("happy")
        count_blessings()
        collaborative_work()
    end

    // åˆ›å»ºç”¨æˆ·ç•Œé¢
    ui = create_welcoming_ui()
    ui.show_with_love()

    // å¼‚æ­¥è·å–çµæ„Ÿ
    spawn_async fetch_inspiration()

    say "ğŸŒŸ æ„¿ä½ çš„ç¼–ç¨‹ä¹‹æ—…å……æ»¡å–œæ‚¦å’Œæˆé•¿"
end

// === é…ç½®å’Œå…ƒæ•°æ® ===
project_metadata:
    version: "1.0.0"
    description: "å±•ç¤º HerLang æ¸©æŸ”è¯­æ³•çš„ç¤ºä¾‹ç¨‹åº"
    keywords: ["æ¸©æŸ”", "åŒ…å®¹", "ç°ä»£", "å‹å¥½"]

    community_guidelines:
        - "ä»¥å°Šé‡å’Œç†è§£å¯¹å¾…æ¯ä¸ªäºº"
        - "åˆ›é€ å®‰å…¨å’ŒåŒ…å®¹çš„ç¼–ç¨‹ç¯å¢ƒ"
        - "é¼“åŠ±å­¦ä¹ å’Œæˆé•¿ï¼Œä¸è®ºæŠ€èƒ½æ°´å¹³"
        - "åº†ç¥å¤šæ ·æ€§å’Œä¸åŒçš„è§‚ç‚¹"
    end

    accessibility:
        screen_reader_friendly: true
        high_contrast_mode: true
        keyboard_navigation: true
        multilingual_support: ["ä¸­æ–‡", "English", "EspaÃ±ol", "FranÃ§ais"]
    end
end
